{"version":3,"file":"inject_message.min.js","sources":["../../src/inject_ai/inject_message.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * Injects AI feedback into the grading editor.\n *\n * @module      local_assign_ai/inject_ai/inject_message\n * @copyright   2025 Datacurso\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Injects AI message into feedback editor.\n *\n * @param {string} message The message to inject.\n * @returns {boolean} True if message was injected successfully\n */\nexport const injectMessage = (message) => {\n    if (!message) {\n        return false;\n    }\n\n    const textarea = document.querySelector(\n        '#id_assignfeedbackcomments_editor, textarea[id^=\"id_feedbackcomments_\"]'\n    );\n\n    if (!textarea) {\n        return false;\n    }\n\n    if (textarea.value === message) {\n        return true;\n    }\n\n    textarea.value = message;\n\n    // TinyMCE support\n    if (window.tinymce && window.tinymce.get(textarea.id)) {\n        window.tinymce.get(textarea.id).setContent(message);\n        return true;\n    }\n\n    // Atto support\n    if (window.M && window.M.editor_atto && window.M.editor_atto.getEditorForElement) {\n        const editor = window.M.editor_atto.getEditorForElement(textarea);\n        if (editor) {\n            editor.setHTML(message);\n            return true;\n        }\n    }\n\n    return true;\n};\n"],"names":["message","textarea","document","querySelector","value","window","tinymce","get","id","setContent","M","editor_atto","getEditorForElement","editor","setHTML"],"mappings":"+LA6B8BA,cACrBA,eACM,QAGLC,SAAWC,SAASC,cACtB,+EAGCF,gBACM,KAGPA,SAASG,QAAUJ,eACZ,KAGXC,SAASG,MAAQJ,QAGbK,OAAOC,SAAWD,OAAOC,QAAQC,IAAIN,SAASO,WAC9CH,OAAOC,QAAQC,IAAIN,SAASO,IAAIC,WAAWT,UACpC,KAIPK,OAAOK,GAAKL,OAAOK,EAAEC,aAAeN,OAAOK,EAAEC,YAAYC,oBAAqB,OACxEC,OAASR,OAAOK,EAAEC,YAAYC,oBAAoBX,aACpDY,cACAA,OAAOC,QAAQd,UACR,SAIR"}