define("local_assign_ai/inject_ai/inject_rubric",["exports","core/notification","./normalize_string"],(function(_exports,_notification,_normalize_string){var obj;
/**
   * Injects rubric selections and comments.
   *
   * @module      local_assign_ai/inject_ai/inject_rubric
   * @copyright   2025 Datacurso
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.injectRubric=void 0,_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj};_exports.injectRubric=(rubricData,strRubricError)=>{if(!Array.isArray(rubricData))return _notification.default.addNotification({message:strRubricError,type:"error"}),!1;let injected=!1;const criterionRows=document.querySelectorAll("tr.criterion");return 0!==criterionRows.length&&(rubricData.forEach((criterionData=>{const criterionName=criterionData.criterion,targetPoints=criterionData.levels[0].points,comment=criterionData.levels[0].comment;criterionRows.forEach((row=>{const descriptionCell=row.querySelector("td.description");if(!descriptionCell)return;const rowCriterionName=descriptionCell.textContent.trim();if((0,_normalize_string.normalizeString)(rowCriterionName)!==(0,_normalize_string.normalizeString)(criterionName))return;row.querySelectorAll("td.level").forEach((levelCell=>{const scoreSpan=levelCell.querySelector(".scorevalue");if(!scoreSpan)return;const points=parseFloat(scoreSpan.textContent.trim());if(Math.abs(points-targetPoints)<.1){const radioInput=levelCell.querySelector('input[type="radio"]');if(!radioInput)return;radioInput.checked||(levelCell.click&&levelCell.click(),radioInput.click&&radioInput.click(),setTimeout((()=>{radioInput.checked=!0,radioInput.dispatchEvent(new Event("change",{bubbles:!0})),levelCell.setAttribute("aria-checked","true"),levelCell.parentElement.querySelectorAll("td.level").forEach((c=>{c!==levelCell&&c.setAttribute("aria-checked","false")}))}),50)),injected=!0}}));const remarkTextarea=row.querySelector("td.remark textarea");remarkTextarea&&comment&&(remarkTextarea.value!==comment&&(remarkTextarea.value=comment,remarkTextarea.dispatchEvent(new Event("input",{bubbles:!0})),remarkTextarea.dispatchEvent(new Event("change",{bubbles:!0}))),injected=!0)}))})),injected)}}));

//# sourceMappingURL=inject_rubric.min.js.map